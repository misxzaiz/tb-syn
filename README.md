# 同步系统 (Syn)

基于 Spring Boot + Redis 的轻量级分布式数据同步框架，专为多服务实例环境设计。

## 核心架构

### 设计理念
- **轻量级**：不依赖消息队列和定时任务中间件，基于现有技术栈实现
- **可靠性**：多层重试机制 + 备份保护，确保数据不丢失
- **一致性**：分布式锁 + 幂等设计，保证数据同步的一致性

### 核心组件

1. **分布式锁模块**
   - 基于 Redis 实现的分布式锁
   - 智能看门狗机制（自动续期 + 失败保护）
   - Lua 脚本保证原子操作

2. **同步引擎**
   - 统一的同步流程控制
   - 时间窗口增量同步
   - 状态机管理同步状态

3. **队列缓冲层**
   - Redis 队列异步处理
   - 主队列 + 备份队列设计
   - 批量处理优化

4. **数据处理层**
   - 插件化数据处理器
   - 业务主键幂等保证
   - 灵活的数据转换

## 技术亮点

### 1. 看门狗机制
- 续期失败自动检测（3次失败后停止）
- 防止死锁和资源泄漏
- 优雅的异常处理

### 2. 失败重试策略
- 备份队列：失败数据自动保留
- 状态重试：异常状态自动恢复
- 续期重试：网络波动自动补偿

### 3. 幂等性设计
- 数据库层：业务主键唯一约束
- 同步层：时间窗口 + 状态管理
- 应用层：去重逻辑保护

## 方案优缺点

### 优点
1. **部署简单**：无需额外中间件，基于 Redis 即可运行
2. **成本可控**：技术栈简单，维护成本低
3. **可靠性高**：多重保护机制，数据零丢失
4. **扩展性好**：支持多服务，插件化架构
5. **性能适中**：适合中小规模数据同步

### 缺点
1. **Redis 依赖**：强依赖 Redis 可用性
2. **规模限制**：超大数据量场景需要优化
3. **监控缺失**：缺少完善的监控指标
4. **功能单一**：专注于数据同步，功能相对简单

## 适用场景

### 推荐场景
- 中小型企业数据同步
- 微服务间数据同步
- 定时批量数据处理
- 灾备数据同步

### 不适用场景
- 实时性要求极高的场景
- 超大数据量（TB级）同步
- 复杂的数据转换需求
- 需要事务保证的场景

## 总结

这是一个在特定约束下（无消息队列、无定时中间件）的务实方案，通过巧妙的设计实现了可靠的数据同步。虽然有其局限性，但在合适的场景下能够快速解决问题，具有很高的实用价值。

未来可以通过持续迭代，逐步完善监控、性能、扩展性等方面的能力，使其成为一个更加成熟的数据同步解决方案。
